%% KODIFIKAZIOA %%
\usepackage[utf8x]{inputenc}
\usepackage[T1]{fontenc}

%% FONTS %%
\usepackage{libertine}
\usepackage{inconsolata}

%% HYPERREFERENCES %%
\usepackage[hyperindex,bookmarks,colorlinks=true,citecolor=blue,urlcolor=blue,linkcolor=blue,pagebackref]{hyperref}
\renewcommand*{\backref}[1]{}
\renewcommand\backreftwosep{, }
\renewcommand\backrefsep{, }

%% MISC. %%
\usepackage{appendix}
\usepackage{placeins}
\usepackage[figuresright]{rotating}
\usepackage{graphicx}
\usepackage{subfig}
\usepackage{float}
%\floatstyle{boxed}
\restylefloat{figure}
\usepackage{xcolor, graphicx}
\usepackage{multirow}
\usepackage{pdfpages}
\usepackage{xspace}
\usepackage{microtype}
\usepackage{longtable}
\setsecnumdepth{subsubsection}
\maxtocdepth {subsection}
\setlength{\parskip}{5pt}
\usepackage{enumerate}
\makeatletter
\renewcommand{\counterwithin}{\@ifstar{\@csinstar}{\@csin}}
\makeatother
\usepackage{doi}
\usepackage{amsmath, amssymb, mathrsfs, mathtools}
\usepackage[capitalise]{cleveref}
\usepackage{fontspec}
\usepackage{listings}
\usepackage[toc,indexonlyfirst,acronym]{glossaries}
\makeglossaries
\usepackage{algorithm}
\usepackage{algpseudocode}



% FORMATO DE FRAGMENTOS DE CÓDIGO FUENTE %
\definecolor{sourcecode-background-color}{HTML}{f2f2f2} % color de fondo del recuadro
\definecolor{sourcecode-background-border}{HTML}{000000} % borde del recuadro
\definecolor{sourcecode-comment-color}{HTML}{339966} % color de los comentarios
\definecolor{sourcecode-code-color}{HTML}{000000} % color del código
\definecolor{sourcecode-keyword-color}{HTML}{0000ff} % color de las palabras clave
\definecolor{sourcecode-linenumber-color}{HTML}{000000} % color de los números de línea
\definecolor{sourcecode-identifier-color}{HTML}{000000} % color de los identificadores: nombres de clase, propiedades, variables, métodos, etc.
\definecolor{sourcecode-string-color}{HTML}{e67300} % color de los strings

\lstset{ 
  frameround=tttt, % 4 bordes redondeados: t-> borde redondeado, f-> borde no redondeado
  backgroundcolor=\color{sourcecode-background-color}, % color de fondo del recuadro
  basicstyle=\small\color{sourcecode-code-color}, % estilo del código
  commentstyle=\color{sourcecode-comment-color}, % estilo de los comentarios
  frame=single, % marco
  keywordstyle=\color{sourcecode-keyword-color}, % estilo de las palabras clave
  numbers=left, 
  numbersep=10pt, % separación entre números de línea y código
  numberstyle=\tiny\color{sourcecode-linenumber-color}, % estilo de los números de línea
  rulecolor=\color{sourcecode-background-border}, % color del marco
  showstringspaces=false,
  title=\lstname, % show the filename of files included with \lstinputlisting; also try caption instead of title
  identifierstyle=\color{sourcecode-identifier-color},
  stringstyle=\color{sourcecode-string-color}
}


% FUENTES %
\ifdefined\euskara

 \newfontfamily{\serif}[
 Path          = fonts/,
 Ligatures     = TeX,
 UprightFont   = EHUSerif-Light.otf,
 BoldItalicFont= EHUSerif-BoldItalic.otf,
 BoldFont      = EHUSerif-Bold.otf,
 ItalicFont    = EHUSerif-Italic.otf
 ]{EHUSerif}
  
 \newfontfamily{\serifthick}[
 Path          = fonts/,
 BoldFont      = EHUSerif-Bold.otf,
 UprightFont   = EHUSerif-Regular.otf
 ]{EHUSerif}
 
 \newfontfamily{\serifblack}[
 Path          = fonts/,
 UprightFont   = EHUSerif-Black.otf
 ]{EHUSerif}
 
\else

 \setmainfont[
 Path          = fonts/,
 Ligatures     = TeX,
 UprightFont   = EHUSans-Light.otf,
 BoldItalicFont= EHUSans-BoldItalic.otf,
 BoldFont      = EHUSans-Bold.otf,
 ItalicFont    = EHUSans-Italic.otf
 ]{EHUSans}
 
\newfontfamily{\sansthick}[
 Path          = fonts/,
 BoldFont      = EHUSans-Bold.otf,
 UprightFont   = EHUSans-Regular.otf
 ]{EHUSans}
 
 \newfontfamily{\sansblack}[
 Path          = fonts/,
 UprightFont   = EHUSans-Black.otf
 ]{EHUSans}

\fi



\ifdefined\euskara
\newcommand{\upvehu}{Euskal Herriko Unibertsitatea UPV/EHU}
\newcommand{\tfglabel}{Gradu Amaierako Lana}
\newcommand{\tfmlabel}{Master Tesia}
\newcommand{\phdlabel}{Doktorego Tesia}
\newcommand{\euivg}{Vitoria-Gasteizko Ingeniaritza Eskola}
\renewcommand{\abstract}{Laburpena}
\newcommand{\directorlabel}{Zuzendaria}
\newcommand{\studentlabel}{Ikaslea}
\newcommand{\courselabel}{Ikasturtea}
\newcommand{\datelabel}{Data}
\newcommand{\glossarylabel}{Glosarioa}
\newcommand{\acronymslabel}{Akronimoak}
\newcommand{\algorithmlabel}{Algoritmoa}
\newcommand{\listalgorithmlabel}{Algoritmoen aurkibidea}
\fi
\ifdefined\castellano
\newcommand{\upvehu}{Universidad del País Vasco UPV/EHU}
\newcommand{\tfglabel}{Trabajo de Fin de Grado}
\newcommand{\tfmlabel}{Tesis de Máster}
\newcommand{\phdlabel}{Tesis Doctoral}
\newcommand{\euivg}{Escuela de Ingeniería de Vitoria-Gasteiz}
\renewcommand{\abstract}{Resumen}
\newcommand{\directorlabel}{Director(a)}
\newcommand{\studentlabel}{Alumno/Alumna}
\newcommand{\courselabel}{Curso}
\newcommand{\datelabel}{Fecha}
\newcommand{\glossarylabel}{Glosario}
\newcommand{\acronymslabel}{Acrónimos}
\newcommand{\algorithmlabel}{Algoritmo}
\newcommand{\listalgorithmlabel}{Índice de algoritmos}
\fi
\ifdefined\english
\newcommand{\upvehu}{University of the Basque Country UPV/EHU}
\newcommand{\tfglabel}{Bachelor Thesis}
\newcommand{\tfmlabel}{Master Thesis}
\newcommand{\phdlabel}{PhD Dissertation}
\newcommand{\euivg}{Faculty of Engineering of Vitoria-Gasteiz}
\renewcommand{\abstract}{Abstract}
\newcommand{\directorlabel}{Advisor}
\newcommand{\studentlabel}{Student}
\newcommand{\courselabel}{Course}
\newcommand{\datelabel}{Date}
\newcommand{\glossarylabel}{Glossary}
\newcommand{\acronymslabel}{Acronyms}
\newcommand{\algorithmlabel}{Algorithm}
\newcommand{\listalgorithmlabel}{Index of algorithms}
\fi

\usepackage[font=small,labelfont=bf]{caption}

\ifdefined\euskara
\usepackage[basque]{babel}
% \hyphenation{Ko-man-do-in-ter-pre-ta-tzailea ba-te-ra-ga-rri-ta-suna ezau-garri}

\addto\captionsbasque{
	\renewcommand{\contentsname}{Gaien aurkibidea}
	\renewcommand{\listfigurename}{Irudien aurkibidea}
	\renewcommand{\listtablename}{Taulen aurkibidea}
	\renewcommand{\appendixname}{Eranskina}%
	\renewcommand{\appendixpagename}{Eranskinak}
	\renewcommand{\appendixtocname}{Eranskinak}
	\renewcommand{\bibname}{Bibliografia}
	\renewcommand{\tablename}{Taula}
	\renewcommand{\figurename}{Irudia}
}

% \renewcommand*{\backrefalt}[4]{%
% 	\ifcase #1%
% 	\or Ikusi #2 orrialdea.%
% 	\else Ikusi #2 orrialdeak.%
% 	\fi%
% }

%% Captionak euskarazko ordenean
\DeclareCaptionLabelFormat{euskaraz}{#2\bothIfSecond{\nobreakspace}{#1}}
\captionsetup{labelformat=euskaraz}
\fi

\ifdefined\castellano
\usepackage[spanish]{babel}
\addto\captionsspanish{
	\renewcommand{\contentsname}{Índice de contenidos}
	\renewcommand{\listfigurename}{Índice de figuras}
	\renewcommand{\listtablename}{Índice de tablas}
	\renewcommand{\appendixname}{Apéndice}%
	\renewcommand{\appendixpagename}{Apéndices}
	\renewcommand{\appendixtocname}{Apéndices}
	\renewcommand{\bibname}{Bibliografía}
	\renewcommand{\tablename}{Tabla}
	\renewcommand{\figurename}{Figura}
}

% \renewcommand*{\backrefalt}[4]{%
% \ifcase #1%
% \or Ver página #2.%
% \else Ver páginas #2.%
% \fi%
% }
\fi

\ifdefined\english
\usepackage[english]{babel}
% \renewcommand*{\backrefalt}[4]{%
% 	\ifcase #1%
% 	\or See page #2.%
% 	\else See pages #2.%
% 	\fi%
% }
\fi

\let\theoldbibliography\thebibliography
\renewcommand\thebibliography[1]{
	\theoldbibliography{#1}
	\setlength{\parskip}{0pt}
	\setlength{\itemsep}{4pt plus 0.3ex}
	\small
}

\floatname{algorithm}{\algorithmlabel}
\renewcommand{\listofalgorithms}{\listof{algorithm}{\listalgorithmlabel}}
\renewcommand{\thealgorithm}{\arabic{chapter}.\arabic{algorithm}}